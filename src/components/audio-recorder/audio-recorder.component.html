<div class="bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6 shadow-2xl text-center">
  <div class="flex justify-center items-center mb-6">
    <button
      (click)="toggleRecording()"
      [disabled]="isProcessing()"
      [class]="'relative flex items-center justify-center w-24 h-24 rounded-full transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-gray-900 ' + (isRecording() ? 'bg-red-500 hover:bg-red-600 focus:ring-red-400' : 'bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500') + (isProcessing() ? ' cursor-not-allowed opacity-50' : '')"
    >
      @if (!isProcessing()) {
        <div [class]="'absolute w-full h-full rounded-full animate-ping ' + (isRecording() ? 'bg-red-500' : 'bg-transparent')"></div>
      }
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-white">
        @if (isRecording()) {
          <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z" />
        } @else {
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m12 0v-1.5a6 6 0 0 0-12 0v1.5m12 0a6 6 0 0 0-6 6m-6-6a6 6 0 0 1 6-6" />
        }
      </svg>
    </button>
  </div>

  <p class="text-gray-400 h-6 mb-4">
    {{ getButtonText() }}
  </p>
  
  <div class="min-h-[120px] bg-gray-900/70 rounded-lg p-4 text-left text-gray-300 leading-relaxed overflow-y-auto">
    @if (isProcessing()) {
      <div class="flex items-center justify-center h-full">
        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span>Analyzing audio...</span>
      </div>
    } @else if (transcription()) {
      <p>{{ transcription() }}</p>
    } @else if (error()) {
      <p class="text-red-400">{{ error() }}</p>
    } @else {
      <p class="text-gray-500 text-center">Your transcription will appear here.</p>
    }
  </div>
</div>
